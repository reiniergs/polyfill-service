!function(e){"use strict";void 0===e&&(e={}),"undefined"==typeof e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var r,n,o=[],t=[],i=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,t=["webkitNow","msNow","mozNow"],r=0;r<t.length;r++)if("function"==typeof e.performance[t[r]]){e.performance.now=e.performance[t[r]],e.performance.userTimingJsNowPrefixed=!0;break}var a=+new Date;e.performance.timing&&e.performance.timing.navigationStart?a=e.performance.timing.navigationStart:"undefined"!=typeof process&&"function"==typeof process.hrtime&&(a=process.hrtime(),e.performance.now=function(){var e=process.hrtime(a);return 1e3*e[0]+1e-6*e[1]}),"function"!=typeof e.performance.now&&(Date.now?e.performance.now=function(){return Date.now()-a}:e.performance.now=function(){return+new Date-a})}var f=function(){},m=function(){},p=[],c=!1,s=!1;if("function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(s=!0),e.performance.userTimingJsPerformanceTimeline=!0,o=["webkit","moz"],t=["getEntries","getEntriesByName","getEntriesByType"],r=0;r<t.length;r++)for(n=0;n<o.length;n++)i=o[n]+t[r].substr(0,1).toUpperCase()+t[r].substr(1),"function"==typeof e.performance[i]&&(e.performance[t[r]]=e.performance[i],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);f=function(e){p.push(e),"measure"===e.entryType&&(c=!0)};var u=function(){c&&(p.sort(function(e,r){return e.startTime-r.startTime}),c=!1)};if(m=function(e,n){for(r=0;r<p.length;)p[r].entryType===e&&(void 0===n||p[r].name===n)?p.splice(r,1):r++},"function"!=typeof e.performance.getEntries||s){var g=e.performance.getEntries;e.performance.getEntries=function(){u();var r=p.slice(0);return s&&g&&(Array.prototype.push.apply(r,g.call(e.performance)),r.sort(function(e,r){return e.startTime-r.startTime})),r}}if("function"!=typeof e.performance.getEntriesByType||s){var y=e.performance.getEntriesByType;e.performance.getEntriesByType=function(n){if(void 0===n||"mark"!==n&&"measure"!==n)return s&&y?y.call(e.performance,n):[];"measure"===n&&u();var o=[];for(r=0;r<p.length;r++)p[r].entryType===n&&o.push(p[r]);return o}}if("function"!=typeof e.performance.getEntriesByName||s){var l=e.performance.getEntriesByName;e.performance.getEntriesByName=function(n,o){if(o&&"mark"!==o&&"measure"!==o)return s&&l?l.call(e.performance,n,o):[];void 0!==o&&"measure"===o&&u();var t=[];for(r=0;r<p.length;r++)void 0!==o&&p[r].entryType!==o||p[r].name===n&&t.push(p[r]);return s&&l&&(Array.prototype.push.apply(t,l.call(e.performance,n,o)),t.sort(function(e,r){return e.startTime-r.startTime})),t}}}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,o=["webkit","moz","ms"],t=["mark","measure","clearMarks","clearMeasures"],r=0;r<t.length;r++)for(n=0;n<o.length;n++)i=o[n]+t[r].substr(0,1).toUpperCase()+t[r].substr(1),"function"==typeof e.performance[i]&&(e.performance[t[r]]=e.performance[i],e.performance.userTimingJsUserTimingPrefixed=!0);var d={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(r){var n=e.performance.now();if(void 0===r)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&r in e.performance.timing)throw new SyntaxError("Mark name is not allowed");d[r]||(d[r]=[]),d[r].push(n),f({entryType:"mark",name:r,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?d[e]=[]:d={},m("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(r,n,o){var t=e.performance.now();if(void 0===r)throw new SyntaxError("Measure must be specified");if(!n)return void f({entryType:"measure",name:r,startTime:0,duration:t});var i=0;if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");i=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in d))throw new Error(n+" mark not found");i=d[n][d[n].length-1]}var a=t;if(o)if(a=0,e.performance.timing&&o in e.performance.timing){if("navigationStart"!==o&&0===e.performance.timing[o])throw new Error(o+" has a timing of 0");a=e.performance.timing[o]-e.performance.timing.navigationStart}else{if(!(o in d))throw new Error(o+" mark not found");a=d[o][d[o].length-1]}f({entryType:"measure",name:r,startTime:i,duration:a-i})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){m("measure",e)})}"function"==typeof define&&define.amd?define([],function(){return e.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=e.performance)}("undefined"!=typeof window?window:undefined);